#!/bin/sh 
SCRIPT_DIR="$( cd -- "$( dirname -- "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )"

# set up working directory

cd $SCRIPT_DIR
cd ..

build=built
export tauopen=open 


libtype="bc" 


function libexe {
 rm -f $build/error.html
 allargs="$@"
 [[ "${allargs#*o=}" != $allargs ]] && rm  -f built/${allargs#*o=}
 #echo "running ${allargs::40}"
 if [ -z "$norun" ];then
 echo building $node
 restargs="${allargs#*\ }"
$build/${tauDylib}$1.lib $restargs > /dev/null
 else
   echo "make built/${allargs#*o=}"
fi
 if  [ -e $build/error.html ] ; then
  $tauopen $build/error.html  
  mv sums.txt built/oldsums.txt
  exit 1
 fi
}

rm -f tmp/output.html
libexe $@ o=+tmp output.html && $tauopen "tmp/output.html"
